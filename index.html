<html>
	<script>
	function parse_url(val)
	{
		let shortened = document.getElementById("shortened");
		if (val.toLowerCase().includes("amazon.com"))
		{
			let start = val.indexOf('/dp/') + 4;
			let end = val.indexOf('/',start+1);
			let indentifier = val.substring(start, end);
			let base = "https://amzn.com/"
			let url = base + indentifier;
			shortened.value = url;
			shortened.innerHTML = url;
		}
		else
		{
			shortened.innerHTML = "Not a valid amazon link";
		}
	}
	</script>
	<div style="display: flex; justify-content: center; align-items: center; height:100%; flex-direction: column">
		<h1>Amazon Link shortener</h1>
		<label style="border: 1px solid black;width: 50%;text-align: center;border-radius: 5px 5px 0px 0px;" for='link'>Paste Link</label>
		<div style="border: 1px solid black;width: 50%;text-align: center;border-radius: 0px 0px 5px 5px; height:25px" >
			<input style="width:100%; height:100%;" id='link' oninput="parse_url(this.value)"></input>
		</div>
		<br/>
		<span style="border: 1px solid black;width: 50%;text-align: center;border-radius: 5px 5px 0px 0px;">Result:</span>
		<input style="border: 1px solid black;width: 50%;text-align: center;border-radius: 0px 0px 5px 5px; height:25px" id='shortened' href='amazon.com'></input>
	</div>
</html>
